(()=>{var s={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return s.d(a,{a}),a},d:(t,a)=>{for(var e in a)s.o(a,e)&&!s.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:a[e]})},o:(s,t)=>Object.prototype.hasOwnProperty.call(s,t)};(()=>{"use strict";function t(){return t=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var e in a)({}).hasOwnProperty.call(a,e)&&(s[e]=a[e])}return s},t.apply(null,arguments)}const a=flarum.core.compat["common/extend"],e=flarum.core.compat["forum/components/DiscussionListItem"];var o=s.n(e);const r=flarum.core.compat["tags/components/TagsPage"];var i=s.n(r);const n=flarum.core.compat["components/IndexPage"];var l=s.n(n);const c=flarum.core.compat["components/Link"];var u=s.n(c);const d=flarum.core.compat["components/LoadingIndicator"];var p=s.n(d);const g=flarum.core.compat["helpers/listItems"];var v=s.n(g);const f=flarum.core.compat["helpers/humanTime"];var h=s.n(f);const T=flarum.core.compat["tags/common/helpers/tagIcon"];var N=s.n(T);const C=flarum.core.compat["tags/common/helpers/tagLabel"];var y=s.n(C);const P=flarum.core.compat["tags/common/utils/sortTags"];var A=s.n(P),b=function(){function s(){}var t=s.prototype;return t.oninit=function(){var s=this;this.loading=!0,app.store.find("tags",{include:"lastPostedDiscussion,lastPostedDiscussion.lastPostedUser"}).then(function(t){s.tags=t,s.loading=!1,m.redraw()})},t.view=function(){if(this.loading)return m(p(),null);var s=this.tags.filter(function(s){return null!==s.position()}).sort(function(s,t){return s.position()-t.position()}),t=this.tags.filter(function(s){return null===s.position()});return console.log(s),m("div",{className:"Asirem-TagsPage"},l().prototype.hero()," ",m("div",{className:"sideNavContainer container"},m("nav",{className:"TagsPage-nav IndexPage-nav sideNav"},m("ul",null,v()(l().prototype.sidebarItems().toArray()))),m("div",{className:"TagsPage-content sideNavOffset"},m("ul",{className:"Asirem-TagTiles"},s.map(function(s){var t,a,e=s.lastPostedDiscussion(),o=A()(s.children()||[]),r=N()(s,{},{useColor:!1}),i=(e.lastPostNumber(),e.id(),s.slug(),s.attribute("unreadCount"));console.log(s.slug()+": "+i);var n=s.lastPostedDiscussion().lastPostedUser();return r.attrs.style&&r.attrs.style.backgroundColor&&delete r.attrs.style.backgroundColor,m("li",{className:"Asirem-TagTile "+(s.color()?"colored":""),style:{"--tag-bg":s.color()}},m("div",{className:"Asirem-TagTile-badge"},i>0&&m("span",{className:"Asirem-TagTile-dot"}),i>0&&(i>=20?"20+":i)),m(u(),{className:"Asirem-TagTile-info",href:app.route.tag(s)},m("div",{className:"Asirem-TagTile-icon"},r),m("div",{className:"Asirem-TagTile-content"},m("h3",{className:"Asirem-TagTile-name"},s.name()),m("p",{className:"Asirem-TagTile-description"},s.description()),o&&o.length?m("div",{className:"Asirem-TagTile-children"},o.map(function(s){return[m(u(),{href:app.route.tag(s),className:"TagLabel"},s.name())," "]})):"",e?m("div",{className:"Asirem-TagTile-lastPostedDiscussion"},m("div",{className:"Asirem-TagTile-lastPosterIcon"},null!=n.avatarUrl&&n.avatarUrl()?m("span",{className:"Avatar Avatar--image",style:{backgroundImage:"url("+(null==n.avatarUrl?void 0:n.avatarUrl())+")"}}):m("span",{className:"Avatar Avatar--no-image",style:{backgroundColor:null==n.color?void 0:n.color()}},null==n.displayName||null==(t=n.displayName())||null==(a=t[0])?void 0:a.toUpperCase())),m(u(),{href:app.route.discussion(e,e.lastPostNumber()),className:"Asirem-TagTile-lastPostedDiscussion-link"},m("span",{className:"Asirem-TagTile-lastPostedDiscussion-title"},e.title())),m("time",{datetime:e.lastPostedAt()},h()(e.lastPostedAt()))):m("span",{className:"Asirem-TagTile-lastPostedDiscussion"}))))})),t.length?m("div",{className:"Asirem-TagCloud"},t.map(function(s){return[y()(s,{link:!0})," "]})):"")))},s}();const I=flarum.core.compat["utils/string"],L=flarum.core.compat["extensions/afrux-theme-base/forum/components/Footer"];var D=s.n(L);app.initializers.add("deltamichael-asirem",function(){(0,a.extend)(o().prototype,"view",function(s){var a=s.children.find(function(s){return s&&"div"===s.tag&&s.attrs&&s.attrs.className.includes("DiscussionListItem-content")});a.children[0]=m("div",{className:"DiscussionListItem-author-container"},[a.children[0],a.children[1]]),delete a.children[1],a.children[3]=m("div",{className:"DiscussionListItem-stats"},a.children[3]),this.attrs.discussion.tags()&&this.attrs.discussion.tags()[0]&&this.attrs.discussion.tags()[0].color()&&(s.attrs.style=t({"--tag-color":this.attrs.discussion.tags()[0].color()},s.attrs.style||{})),this.attrs.discussion.isUnread()&&(s.attrs.className+=" DiscussionListItem--unread")}),(0,a.extend)(o().prototype,"infoItems",function(s){if(!s.has("excerpt")){var t=this.attrs.discussion.firstPost();if(t){var a=(0,I.truncate)(t.contentPlain(),175);s.add("excerpt",m("div",null,a),-100)}}}),(0,a.override)(D().prototype,"separator",function(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1440",height:"288",className:"Asirem-footerWaves"},m("path",{"fill-opacity":"1",d:"M0,224L18.5,186.7C36.9,149,74,75,111,58.7C147.7,43,185,85,222,112C258.5,139,295,149,332,154.7C369.2,160,406,160,443,149.3C480,139,517,117,554,101.3C590.8,85,628,75,665,96C701.5,117,738,171,775,165.3C812.3,160,849,96,886,101.3C923.1,107,960,181,997,218.7C1033.8,256,1071,256,1108,250.7C1144.6,245,1182,235,1218,202.7C1255.4,171,1292,117,1329,117.3C1366.2,117,1403,171,1422,197.3L1440,224L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z"}))}),(0,a.override)(i().prototype,"view",b.prototype.view),(0,a.override)(i().prototype,"oninit",b.prototype.oninit)})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map